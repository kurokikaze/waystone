import { ACTION_EFFECT, EFFECT_TYPE_START_OF_TURN } from 'moonlands/dist/esm/index';
import { GameState } from '../GameState'
import { SerializedClientState } from '../types';
import { SimulationStrategy } from '../strategies/SimulationStrategy';

describe('GameState tests', () => {
    it('Ticking down the continuous effects', () => {
        const stateJson = '{"staticAbilities":[],"energyPrompt":false,"turnTimer":false,"turnSecondsLeft":0,"promptAvailableCards":[],"zones":{"playerHand":[{"id":"ErGHXZkngOs1Zqt8FPxSE","owner":2,"card":"Vortex of Knowledge","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"TSlnuL_7YE8RM4BfzNxDi","owner":2,"card":"Weebo","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"h8zzvHlMd-7HA_2ZFtfgc","owner":2,"card":"Carillion","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"5elrTKfasqIqoDSGvf98i","owner":2,"card":"Rudwot","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"mABN8go9hTw8qfWmPUQ4r","owner":2,"card":"Rudwot","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentHand":[{"id":"ryy3ZLks39vqJSw5CG-DF","owner":1,"card":null,"data":null},{"id":"rPExwk34EtE3VywhDSN4v","owner":1,"card":null,"data":null},{"id":"8FFslEchKc35o8V9MGj4N","owner":1,"card":null,"data":null},{"id":"nIYagrtZOeSzIsuHtaN5w","owner":1,"card":null,"data":null},{"id":"D5F4xCoHvIM3U-TMDlLhg","owner":1,"card":null,"data":null}],"playerDeck":[{"card":null,"data":{},"owner":2,"id":"wQLT1aDVPPu3LzAsiCDlz"},{"card":null,"data":{},"owner":2,"id":"H9R7qJVoyR9p7_s9a3Z2f"},{"card":null,"data":{},"owner":2,"id":"ezpV0z7Qsmv-heO_04Y2A"},{"card":null,"data":{},"owner":2,"id":"HEK8wtK-XCbcQsB2Jf5Jv"},{"card":null,"data":{},"owner":2,"id":"tAnQTAeDpimDymC5vVFgI"},{"card":null,"data":{},"owner":2,"id":"Tzx3HBbTLhcGk_gLhu7jZ"},{"card":null,"data":{},"owner":2,"id":"0W3kP83wPUgcPbsmDCGhp"},{"card":null,"data":{},"owner":2,"id":"u2-bVeez3O03cFIqxC5c1"},{"card":null,"data":{},"owner":2,"id":"qBY4P0kE4qqiKaj9DrJEB"},{"card":null,"data":{},"owner":2,"id":"xjtzPwFKtwP8ifqBHKfCR"},{"card":null,"data":{},"owner":2,"id":"3BHkNem7zJy74g3FtTx3O"},{"card":null,"data":{},"owner":2,"id":"dbESI_-2RoWmqtbfYsnfq"},{"card":null,"data":{},"owner":2,"id":"P8BLVk9_lkqdt6g_b-_tP"},{"card":null,"data":{},"owner":2,"id":"q86ZXJ8ou9KKfAifyvkZl"},{"card":null,"data":{},"owner":2,"id":"-laiXBov0Hsp-wYtO2cDw"},{"card":null,"data":{},"owner":2,"id":"_3YsAXxrC_NSmkX44k1tU"},{"card":null,"data":{},"owner":2,"id":"3lS33toWmwZCnL3YCB0gQ"},{"card":null,"data":{},"owner":2,"id":"5aURsu4BkTMH3OCy16Nvi"},{"card":null,"data":{},"owner":2,"id":"U8z_hGTJtwPNCq7SHmsvK"},{"card":null,"data":{},"owner":2,"id":"yu6i_xhz7-25XUgLfhdyC"},{"card":null,"data":{},"owner":2,"id":"t3N3avHRyJPEg478Qm8tn"},{"card":null,"data":{},"owner":2,"id":"iLOQXxLzZzARF031howRL"},{"card":null,"data":{},"owner":2,"id":"DM6ANUW6VtmlZr47v4pz0"},{"card":null,"data":{},"owner":2,"id":"daisq3kweMCMGWnbKvXry"},{"card":null,"data":{},"owner":2,"id":"68YAgHl30eVCk0DwVfunh"},{"card":null,"data":{},"owner":2,"id":"O7ldGcf4pbk4a7S4ih0xB"},{"card":null,"data":{},"owner":2,"id":"gjswM8VgDobxwS0Lfv7FH"},{"card":null,"data":{},"owner":2,"id":"sR4NEKB24ymGuWkMnMeIw"},{"card":null,"data":{},"owner":2,"id":"l3tfyljX_77o_RBP_0Yj7"},{"card":null,"data":{},"owner":2,"id":"cTOCxxpjYprFVSUGmtvLV"},{"card":null,"data":{},"owner":2,"id":"h2d_xNgcxCux2TqI3rly5"},{"card":null,"data":{},"owner":2,"id":"VA-RbKAyeAXmnnEnWomfe"}],"opponentDeck":[{"card":null,"data":{},"owner":1,"id":"ggH2qnsiCIMumN7F2wSmh"},{"card":null,"data":{},"owner":1,"id":"lJsSSLJIpFR8TLpc9c2RE"},{"card":null,"data":{},"owner":1,"id":"qxU0mkpLVfeTRrDl6OASE"},{"card":null,"data":{},"owner":1,"id":"78C2FlKIsg-75WPYjsQej"},{"card":null,"data":{},"owner":1,"id":"7wYhVbkrjBegm2Y39TA_R"},{"card":null,"data":{},"owner":1,"id":"033ldFVKgv4Fc1pDj83V4"},{"card":null,"data":{},"owner":1,"id":"d3XRFizet4TthwsfYJgq_"},{"card":null,"data":{},"owner":1,"id":"Yey5R5MSASdpVtzQ5S3-G"},{"card":null,"data":{},"owner":1,"id":"4HNq3lf6G5wkqWUAK1WTs"},{"card":null,"data":{},"owner":1,"id":"i_hi7sur1nwM0zNp4zaJz"},{"card":null,"data":{},"owner":1,"id":"S-Qm3HYbxaWPBQ_jT6moM"},{"card":null,"data":{},"owner":1,"id":"CERjNycvGh0JVqLSjFX_V"},{"card":null,"data":{},"owner":1,"id":"V1Qbl293D5LmMSPc-H29w"},{"card":null,"data":{},"owner":1,"id":"9JO4DIZ1RN5Fe3drhWkrv"},{"card":null,"data":{},"owner":1,"id":"7HyYlJQ9oHxL9n2vPtpbi"},{"card":null,"data":{},"owner":1,"id":"WilVt0VX8DXK9_PuxbOIM"},{"card":null,"data":{},"owner":1,"id":"2rBLqueIlMffYLeD5qjEU"},{"card":null,"data":{},"owner":1,"id":"UmBWu3n8t2EFtIPSJ1wZn"},{"card":null,"data":{},"owner":1,"id":"lq11GiHKbUbyOAeHI_3SZ"},{"card":null,"data":{},"owner":1,"id":"7OIihSzlPDyKgWIyaNK-D"},{"card":null,"data":{},"owner":1,"id":"o6R3iir0XVjmnK88kD64b"},{"card":null,"data":{},"owner":1,"id":"MSwbx5od3INNgq0v7fC65"},{"card":null,"data":{},"owner":1,"id":"BuGSTU6gOHngy781JsQgN"},{"card":null,"data":{},"owner":1,"id":"aYcSNuHBXNDLhCLdze-zN"},{"card":null,"data":{},"owner":1,"id":"jT6UYH95c6MUAxPYCjkkd"},{"card":null,"data":{},"owner":1,"id":"Hpu80_tERenmpgMTgJ_Rz"},{"card":null,"data":{},"owner":1,"id":"Po90VTL3EjBr7UcB92gfr"},{"card":null,"data":{},"owner":1,"id":"m3M-7U-jyndqzil_owVhn"},{"card":null,"data":{},"owner":1,"id":"8NsSGVSZNcobj3AeojIgR"},{"card":null,"data":{},"owner":1,"id":"o_UCPfupLWbwB8YPIE7lO"},{"card":null,"data":{},"owner":1,"id":"UzwjdTT6X9rSVQa0ZG9BM"},{"card":null,"data":{},"owner":1,"id":"0nC1Cw-hvLnrZ_zWq7Vzi"},{"card":null,"data":{},"owner":1,"id":"C5bw2-rY-_8yQgzUWVUvm"}],"playerActiveMagi":[{"id":"xFAFfnWZFUaOk272Q8Zqp","owner":2,"card":"Evu","data":{"energy":9,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentActiveMagi":[{"id":"rODteQihfu9i6MX_hTiZi","owner":1,"card":"Adis","data":{"energy":12,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"playerMagiPile":[{"card":"Tryn","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"fQIDM4VMbbZI-i6_tSwXV"},{"card":"Yaki","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"t5FzHhsLTSHVFlhvrau_1"}],"opponentMagiPile":[{"card":null,"data":{},"owner":1,"id":"5eAC4lIwxEoLYw8Qt6vy2"},{"card":null,"data":{},"owner":1,"id":"9si4OeXFTgan3ef0TDRdK"}],"inPlay":[{"id":"TKZlA03xfuX1s6boQ-Wa9","owner":2,"card":"Furok","data":{"energy":4,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"KEFVGd5bUpr4s1PWyIecj","owner":2,"card":"Plith","data":{"energy":3,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"HtG3UYed2r06A1wBEXK53","owner":1,"card":"Orathan Flyer","data":{"energy":5,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"playerDefeatedMagi":[],"opponentDefeatedMagi":[],"playerDiscard":[{"id":"PNZi5T7i99T7fIpvsHE81","owner":2,"card":"Arboll","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentDiscard":[{"id":"HK4ecuB10TzZKQz_hC3-N","owner":1,"card":"Fog Bank","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}]},"continuousEffects":[{"generatedBy":"bNNWJStp-lffqs0Pe6DxW","expiration":{"type":"expiration/opponents_turns","turns":2},"staticAbilities":[{"name":"Fog Bank","text":"Creature cannot be attacked for next two opponents turns","selector":"selectors/id","selectorParameter":"HtG3UYed2r06A1wBEXK53","property":"properties/can_be_attacked","modifier":{"operandOne":false,"operator":"calculations/set"}}],"triggerEffects":[],"player":1,"id":"bNNWJStp-lffqs0Pe6DxW"}],"step":0,"turn":1,"goesFirst":2,"activePlayer":1,"prompt":false,"promptType":null,"promptMessage":null,"promptPlayer":null,"promptGeneratedBy":null,"promptParams":{},"opponentId":1,"log":[],"gameEnded":false,"winner":null}'
        const state = new GameState(JSON.parse(stateJson) as SerializedClientState);

        state.setPlayerId(2)

        const turnStartAction = {
            type: ACTION_EFFECT,
            effectType: EFFECT_TYPE_START_OF_TURN,
            player: 2,
            generatedBy: '3rmwJlpPcDZNhbxxhsUcr'
        }

        state.update(turnStartAction)

        console.dir(state.getContinuousEffects())
    })

    it.only('Strange prompt entering', () => {
        const stateObj = {"staticAbilities":[{"card":"Yaki","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"gydA_P_Wnw"},{"card":"Orlon","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"zZbt_Vqoe2"},{"card":"Water of Life","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"gmbRJ5eZ3w"}],"energyPrompt":false,"turnTimer":false,"turnSecondsLeft":0,"promptAvailableCards":[],"zones":{"playerHand":[{"card":"Dream Balm","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"g9QgbVoWVQ"}],"opponentHand":[{"card":null,"data":{},"owner":2,"id":"lgx95-a90E"},{"card":null,"data":{},"owner":2,"id":"6lrassfSOE"},{"card":null,"data":{},"owner":2,"id":"i3wuRX9Jn3"},{"card":null,"data":{},"owner":2,"id":"2EVfmhwg0W"},{"card":null,"data":{},"owner":2,"id":"j5dLvExI1J"},{"card":null,"data":{},"owner":2,"id":"YghHjbTh-6"},{"card":null,"data":{},"owner":2,"id":"nKk9Lc76B7"},{"card":null,"data":{},"owner":2,"id":"aUL5WZDx8t"},{"card":null,"data":{},"owner":2,"id":"CYK8vcXd-R"},{"card":null,"data":{},"owner":2,"id":"4RqhVoFpsc"}],"playerDeck":[{"card":null,"data":{},"owner":1,"id":"m9vBKUIq_j"},{"card":null,"data":{},"owner":1,"id":"yvj55Lx4ZA"},{"card":null,"data":{},"owner":1,"id":"BdiTh8vGrn"},{"card":null,"data":{},"owner":1,"id":"eWgG3rRtnX"},{"card":null,"data":{},"owner":1,"id":"DwGbDh8e75"},{"card":null,"data":{},"owner":1,"id":"czhp8Yu9LR"}],"opponentDeck":[{"card":null,"data":{},"owner":2,"id":"htfRreLJ4v"},{"card":null,"data":{},"owner":2,"id":"_o90oeqB_q"},{"card":null,"data":{},"owner":2,"id":"jdcOnJkU9P"},{"card":null,"data":{},"owner":2,"id":"YdS_DLOiVe"},{"card":null,"data":{},"owner":2,"id":"r2s7bcO3tz"}],"playerActiveMagi":[{"card":"Orlon","data":{"energy":11,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"zZbt_Vqoe2"}],"opponentActiveMagi":[{"card":"Yaki","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"gydA_P_Wnw"}],"playerMagiPile":[],"opponentMagiPile":[],"inPlay":[{"card":"Dream Balm","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"lWE_k5i30J"},{"card":"Water of Life","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"gmbRJ5eZ3w"},{"card":"Sphor","data":{"energy":1,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"VDugmubwdF"},{"card":"Wellisk Pup","data":{"energy":1,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"pTiUM91K5A"},{"card":"Sea Barl","data":{"energy":1,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"25Fv50cBlD"},{"card":"Warrior's Boots","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"rtYysfQnVg"},{"card":"Sea Barl","data":{"energy":7,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"NAdFwQc5aG"},{"card":"Robe of Vines","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"sHJmkbn3ci"},{"card":"Giant Carillion","data":{"energy":9,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"7nS-v7Zs-n"},{"card":"Ancestral Flute","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":["Song of the Family"],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"Y5tn1rAs3j"}],"playerDefeatedMagi":[{"card":"Whall","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"PxZotZ4BG9"},{"card":"Ebylon","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"GqpxqJTyjz"}],"opponentDefeatedMagi":[{"card":"Poad","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"BgG0ZZtHCG"},{"card":"Tryn","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"xz17kEZ8I8"}],"playerDiscard":[{"card":"Weebo","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"ZAOs1N7VYB"},{"card":"Sea Barl","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"MnvUoCXdJs"},{"card":"Dream Balm","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"3jHt16abLg"},{"card":"Corf","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"LkiAu8hxOE"},{"card":"Submerge","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"ubA2vviGoz"},{"card":"Weebo","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"d88OO4TArO"},{"card":"Giant Parathin","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"C2F-7lo7xt"},{"card":"Dream Balm","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"nCzObrFuyw"},{"card":"Sea Barl","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"JJMZ_7CrHT"},{"card":"Orathan","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"08f2drSoZt"},{"card":"Undertow","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"EXw2FyscB2"},{"card":"Bwill","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"GfE2QfhM8M"},{"card":"Wellisk Pup","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"7n2XAsCxXK"},{"card":"Sea Barl","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"SFIeaDzcHi"},{"card":"Wellisk Pup","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"Adb9f7dnJa"},{"card":"Sphor","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"Q4O-PeHHq-"},{"card":"Sphor","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"eA9BzT1N2c"},{"card":"Wellisk Pup","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"ksegHtI_nt"},{"card":"Undertow","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"_dhOSST6fZ"},{"card":"Bwill","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"LZH3hNz-CO"},{"card":"Sphor","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"iZ4D3rpJEy"},{"card":"Orathan","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"5V87-O7cQD"},{"card":"Dream Balm","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"NOTt2T9t1c"},{"card":"Corf","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"sRjf0_nQfK"},{"card":"Submerge","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"GRTNc4ngch"}],"opponentDiscard":[{"card":"Bhatar","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"R9AppNLzr_"},{"card":"Leaf Hyren","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"8CTFVkOx9E"},{"card":"Plith","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"yupuwjt6C_"},{"card":"Giant Carillion","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"CuWugsCJbX"},{"card":"Balamant Pup","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"KvmqDt9CLV"},{"card":"Ancestral Flute","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"dKqjDOtltQ"},{"card":"Robe of Vines","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"8RPIoHw-P3"},{"card":"Rudwot","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"ys42S7Y6oa"},{"card":"Balamant Pup","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"d0yMPtzifJ"},{"card":"Carillion","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"n5mypveLzU"},{"card":"Leaf Hyren","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"NGJIxuNqgb"},{"card":"Water of Life","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"1tABqOFfWt"},{"card":"Timber Hyren","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"A526I3cp81"},{"card":"Ancestral Flute","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"3a3Rg2W1TR"},{"card":"Water of Life","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"zWN1aAlE1_"},{"card":"Ancestral Flute","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"ItER2C0RvD"},{"card":"Weebo","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"_k3-YyemZK"},{"card":"Furok","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"FuH4x5_8W-"},{"card":"Arboll","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"pvsdYWx1od"},{"card":"Weebo","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"J3v0oj06TM"},{"card":"Arboll","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"Rz5RDPRJ3l"},{"card":"Balamant Pup","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"_BFBHRZ5BM"},{"card":"Giant Carillion","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"ehUAiTIINx"}]},"continuousEffects":[],"step":1,"turn":1,"goesFirst":1,"activePlayer":1,"prompt":true,"promptType":"prompt/creature","promptMessage":null,"promptPlayer":1,"promptGeneratedBy":"Y5tn1rAs3j","opponentId":2,"log":[],"gameEnded":false,"winner":null,"cardsAttached":{}}

        const state = new GameState(stateObj as unknown as SerializedClientState);

        const strategy = new SimulationStrategy()
        strategy.setup(state, 1);

        console.dir(strategy.requestAction())

        console.dir(strategy.getHeldActions())
    })
})