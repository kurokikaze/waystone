import { ACTION_EFFECT, EFFECT_TYPE_START_OF_TURN } from 'moonlands/src/index';
import { GameState } from '../GameState'
import { SerializedClientState } from '../types';
import { SimulationStrategy } from '../strategies/SimulationStrategy';

describe('GameState tests', () => {
    it('Ticking down the continuous effects', () => {
        const stateJson = '{"staticAbilities":[],"energyPrompt":false,"turnTimer":false,"turnSecondsLeft":0,"promptAvailableCards":[],"zones":{"playerHand":[{"id":"ErGHXZkngOs1Zqt8FPxSE","owner":2,"card":"Vortex of Knowledge","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"TSlnuL_7YE8RM4BfzNxDi","owner":2,"card":"Weebo","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"h8zzvHlMd-7HA_2ZFtfgc","owner":2,"card":"Carillion","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"5elrTKfasqIqoDSGvf98i","owner":2,"card":"Rudwot","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"mABN8go9hTw8qfWmPUQ4r","owner":2,"card":"Rudwot","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentHand":[{"id":"ryy3ZLks39vqJSw5CG-DF","owner":1,"card":null,"data":null},{"id":"rPExwk34EtE3VywhDSN4v","owner":1,"card":null,"data":null},{"id":"8FFslEchKc35o8V9MGj4N","owner":1,"card":null,"data":null},{"id":"nIYagrtZOeSzIsuHtaN5w","owner":1,"card":null,"data":null},{"id":"D5F4xCoHvIM3U-TMDlLhg","owner":1,"card":null,"data":null}],"playerDeck":[{"card":null,"data":{},"owner":2,"id":"wQLT1aDVPPu3LzAsiCDlz"},{"card":null,"data":{},"owner":2,"id":"H9R7qJVoyR9p7_s9a3Z2f"},{"card":null,"data":{},"owner":2,"id":"ezpV0z7Qsmv-heO_04Y2A"},{"card":null,"data":{},"owner":2,"id":"HEK8wtK-XCbcQsB2Jf5Jv"},{"card":null,"data":{},"owner":2,"id":"tAnQTAeDpimDymC5vVFgI"},{"card":null,"data":{},"owner":2,"id":"Tzx3HBbTLhcGk_gLhu7jZ"},{"card":null,"data":{},"owner":2,"id":"0W3kP83wPUgcPbsmDCGhp"},{"card":null,"data":{},"owner":2,"id":"u2-bVeez3O03cFIqxC5c1"},{"card":null,"data":{},"owner":2,"id":"qBY4P0kE4qqiKaj9DrJEB"},{"card":null,"data":{},"owner":2,"id":"xjtzPwFKtwP8ifqBHKfCR"},{"card":null,"data":{},"owner":2,"id":"3BHkNem7zJy74g3FtTx3O"},{"card":null,"data":{},"owner":2,"id":"dbESI_-2RoWmqtbfYsnfq"},{"card":null,"data":{},"owner":2,"id":"P8BLVk9_lkqdt6g_b-_tP"},{"card":null,"data":{},"owner":2,"id":"q86ZXJ8ou9KKfAifyvkZl"},{"card":null,"data":{},"owner":2,"id":"-laiXBov0Hsp-wYtO2cDw"},{"card":null,"data":{},"owner":2,"id":"_3YsAXxrC_NSmkX44k1tU"},{"card":null,"data":{},"owner":2,"id":"3lS33toWmwZCnL3YCB0gQ"},{"card":null,"data":{},"owner":2,"id":"5aURsu4BkTMH3OCy16Nvi"},{"card":null,"data":{},"owner":2,"id":"U8z_hGTJtwPNCq7SHmsvK"},{"card":null,"data":{},"owner":2,"id":"yu6i_xhz7-25XUgLfhdyC"},{"card":null,"data":{},"owner":2,"id":"t3N3avHRyJPEg478Qm8tn"},{"card":null,"data":{},"owner":2,"id":"iLOQXxLzZzARF031howRL"},{"card":null,"data":{},"owner":2,"id":"DM6ANUW6VtmlZr47v4pz0"},{"card":null,"data":{},"owner":2,"id":"daisq3kweMCMGWnbKvXry"},{"card":null,"data":{},"owner":2,"id":"68YAgHl30eVCk0DwVfunh"},{"card":null,"data":{},"owner":2,"id":"O7ldGcf4pbk4a7S4ih0xB"},{"card":null,"data":{},"owner":2,"id":"gjswM8VgDobxwS0Lfv7FH"},{"card":null,"data":{},"owner":2,"id":"sR4NEKB24ymGuWkMnMeIw"},{"card":null,"data":{},"owner":2,"id":"l3tfyljX_77o_RBP_0Yj7"},{"card":null,"data":{},"owner":2,"id":"cTOCxxpjYprFVSUGmtvLV"},{"card":null,"data":{},"owner":2,"id":"h2d_xNgcxCux2TqI3rly5"},{"card":null,"data":{},"owner":2,"id":"VA-RbKAyeAXmnnEnWomfe"}],"opponentDeck":[{"card":null,"data":{},"owner":1,"id":"ggH2qnsiCIMumN7F2wSmh"},{"card":null,"data":{},"owner":1,"id":"lJsSSLJIpFR8TLpc9c2RE"},{"card":null,"data":{},"owner":1,"id":"qxU0mkpLVfeTRrDl6OASE"},{"card":null,"data":{},"owner":1,"id":"78C2FlKIsg-75WPYjsQej"},{"card":null,"data":{},"owner":1,"id":"7wYhVbkrjBegm2Y39TA_R"},{"card":null,"data":{},"owner":1,"id":"033ldFVKgv4Fc1pDj83V4"},{"card":null,"data":{},"owner":1,"id":"d3XRFizet4TthwsfYJgq_"},{"card":null,"data":{},"owner":1,"id":"Yey5R5MSASdpVtzQ5S3-G"},{"card":null,"data":{},"owner":1,"id":"4HNq3lf6G5wkqWUAK1WTs"},{"card":null,"data":{},"owner":1,"id":"i_hi7sur1nwM0zNp4zaJz"},{"card":null,"data":{},"owner":1,"id":"S-Qm3HYbxaWPBQ_jT6moM"},{"card":null,"data":{},"owner":1,"id":"CERjNycvGh0JVqLSjFX_V"},{"card":null,"data":{},"owner":1,"id":"V1Qbl293D5LmMSPc-H29w"},{"card":null,"data":{},"owner":1,"id":"9JO4DIZ1RN5Fe3drhWkrv"},{"card":null,"data":{},"owner":1,"id":"7HyYlJQ9oHxL9n2vPtpbi"},{"card":null,"data":{},"owner":1,"id":"WilVt0VX8DXK9_PuxbOIM"},{"card":null,"data":{},"owner":1,"id":"2rBLqueIlMffYLeD5qjEU"},{"card":null,"data":{},"owner":1,"id":"UmBWu3n8t2EFtIPSJ1wZn"},{"card":null,"data":{},"owner":1,"id":"lq11GiHKbUbyOAeHI_3SZ"},{"card":null,"data":{},"owner":1,"id":"7OIihSzlPDyKgWIyaNK-D"},{"card":null,"data":{},"owner":1,"id":"o6R3iir0XVjmnK88kD64b"},{"card":null,"data":{},"owner":1,"id":"MSwbx5od3INNgq0v7fC65"},{"card":null,"data":{},"owner":1,"id":"BuGSTU6gOHngy781JsQgN"},{"card":null,"data":{},"owner":1,"id":"aYcSNuHBXNDLhCLdze-zN"},{"card":null,"data":{},"owner":1,"id":"jT6UYH95c6MUAxPYCjkkd"},{"card":null,"data":{},"owner":1,"id":"Hpu80_tERenmpgMTgJ_Rz"},{"card":null,"data":{},"owner":1,"id":"Po90VTL3EjBr7UcB92gfr"},{"card":null,"data":{},"owner":1,"id":"m3M-7U-jyndqzil_owVhn"},{"card":null,"data":{},"owner":1,"id":"8NsSGVSZNcobj3AeojIgR"},{"card":null,"data":{},"owner":1,"id":"o_UCPfupLWbwB8YPIE7lO"},{"card":null,"data":{},"owner":1,"id":"UzwjdTT6X9rSVQa0ZG9BM"},{"card":null,"data":{},"owner":1,"id":"0nC1Cw-hvLnrZ_zWq7Vzi"},{"card":null,"data":{},"owner":1,"id":"C5bw2-rY-_8yQgzUWVUvm"}],"playerActiveMagi":[{"id":"xFAFfnWZFUaOk272Q8Zqp","owner":2,"card":"Evu","data":{"energy":9,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentActiveMagi":[{"id":"rODteQihfu9i6MX_hTiZi","owner":1,"card":"Adis","data":{"energy":12,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"playerMagiPile":[{"card":"Tryn","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"fQIDM4VMbbZI-i6_tSwXV"},{"card":"Yaki","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":2,"id":"t5FzHhsLTSHVFlhvrau_1"}],"opponentMagiPile":[{"card":null,"data":{},"owner":1,"id":"5eAC4lIwxEoLYw8Qt6vy2"},{"card":null,"data":{},"owner":1,"id":"9si4OeXFTgan3ef0TDRdK"}],"inPlay":[{"id":"TKZlA03xfuX1s6boQ-Wa9","owner":2,"card":"Furok","data":{"energy":4,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"KEFVGd5bUpr4s1PWyIecj","owner":2,"card":"Plith","data":{"energy":3,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"HtG3UYed2r06A1wBEXK53","owner":1,"card":"Orathan Flyer","data":{"energy":5,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"playerDefeatedMagi":[],"opponentDefeatedMagi":[],"playerDiscard":[{"id":"PNZi5T7i99T7fIpvsHE81","owner":2,"card":"Arboll","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentDiscard":[{"id":"HK4ecuB10TzZKQz_hC3-N","owner":1,"card":"Fog Bank","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}]},"continuousEffects":[{"generatedBy":"bNNWJStp-lffqs0Pe6DxW","expiration":{"type":"expiration/opponents_turns","turns":2},"staticAbilities":[{"name":"Fog Bank","text":"Creature cannot be attacked for next two opponents turns","selector":"selectors/id","selectorParameter":"HtG3UYed2r06A1wBEXK53","property":"properties/can_be_attacked","modifier":{"operandOne":false,"operator":"calculations/set"}}],"triggerEffects":[],"player":1,"id":"bNNWJStp-lffqs0Pe6DxW"}],"step":0,"turn":1,"goesFirst":2,"activePlayer":1,"prompt":false,"promptType":null,"promptMessage":null,"promptPlayer":null,"promptGeneratedBy":null,"promptParams":{},"opponentId":1,"log":[],"gameEnded":false,"winner":null}'
        const state = new GameState(JSON.parse(stateJson) as SerializedClientState);

        state.setPlayerId(2)

        const turnStartAction = {
            type: ACTION_EFFECT,
            effectType: EFFECT_TYPE_START_OF_TURN,
            player: 2,
            generatedBy: '3rmwJlpPcDZNhbxxhsUcr'
        }

        state.update(turnStartAction)

        console.dir(state.getContinuousEffects())
    })

    it.only('Strange prompt entering', () => {
        const stateObj = {"staticAbilities":[{"id":"8zi0QGF-80I27WSPSIjkF","owner":1,"card":"Water of Life","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"L9Sx1YNJGcEoWrmr_WM3p","owner":2,"card":"Yaki","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"energyPrompt":false,"turnTimer":false,"turnSecondsLeft":0,"promptAvailableCards":[],"zones":{"playerHand":[{"id":"IDueK9Etq7o7dmB1N3Vz1","owner":2,"card":"Orwin's Gaze","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"7sJnOmyshY1H8Z9-VdoWp","owner":2,"card":"Orwin's Gaze","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"zLmQss1sZYXztKuL0IAm0","owner":2,"card":"Furok","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"y8qyGGh2Hhmom4UPGXe_P","owner":2,"card":"Arboll","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"sBdQ7FxvsvKFD5AzL08Rg","owner":2,"card":"Grow","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"46ZHjIZvw5sQ5QnWAEF57","owner":2,"card":"Hyren's Call","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"RVuSqFezQRxnho6xpa7Ov","owner":2,"card":"Carillion","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"8gfPmDOQUxS4pS3QKtyW9","owner":2,"card":"Water of Life","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentHand":[{"card":null,"data":{},"owner":1,"id":"mTPt-3wXQZzKupZ6E_OyR"},{"id":"eOuCbgsUVSppHgOVa2vaK","owner":1,"card":null,"data":null},{"id":"dkFQFVMBwGXxOYIO8_-O3","owner":1,"card":null,"data":null},{"id":"3f7o--hKFH4ogqZGFFcAM","owner":1,"card":null,"data":null},{"id":"husRaq4YxzhjDOtPYFAES","owner":1,"card":null,"data":null},{"id":"OX0WMQwwnwRYNVk1QeRmz","owner":1,"card":null,"data":null},{"id":"dB6MkfjWVDcSooNKdjdWN","owner":1,"card":null,"data":null},{"id":"uNybDJZbig962xdYwddqE","owner":1,"card":null,"data":null},{"id":"xi_iRMpvqQkQ4egFG0Rkw","owner":1,"card":null,"data":null},{"id":"2soZQ1aQ0OLmfm3jkAkpR","owner":1,"card":null,"data":null}],"playerDeck":[{"card":null,"data":{},"owner":2,"id":"Unlu2j5x4nIKSauPcSEIR"},{"card":null,"data":{},"owner":2,"id":"4WbP_Wu8mrejno6Rq0_SR"},{"card":null,"data":{},"owner":2,"id":"_un5T0E-6-fHS3F6LItnV"},{"card":null,"data":{},"owner":2,"id":"mWAAEYlWfuux2NahLqjPq"},{"card":null,"data":{},"owner":2,"id":"67OmRjW0IzG7OeWXPl3bF"},{"card":null,"data":{},"owner":2,"id":"GuyryXxqdGbqYpr_paIav"},{"card":null,"data":{},"owner":2,"id":"x2pJYNx4paidERqD3S43n"},{"card":null,"data":{},"owner":2,"id":"wkiYqKik1tuN68FilrvFa"},{"card":null,"data":{},"owner":2,"id":"bd9S5zubCjIYemGtIIY3M"},{"card":null,"data":{},"owner":2,"id":"wP2-SyThiMdyYFk_da1yH"},{"card":null,"data":{},"owner":2,"id":"kspf8r6ao5pc4qKlTfI-L"},{"card":null,"data":{},"owner":2,"id":"El_bEdwSqLdRP-rnNKAkX"},{"card":null,"data":{},"owner":2,"id":"c5ydpJTEZ-Tt0raSwXdqa"},{"card":null,"data":{},"owner":2,"id":"j3-QVKs8KgsM18-U6bpyC"}],"opponentDeck":[{"card":null,"data":{},"owner":1,"id":"-dfcAWs3f-NABCv92d5Tf"},{"card":null,"data":{},"owner":1,"id":"yc9EFbzUptv0ejdLOBCGz"},{"card":null,"data":{},"owner":1,"id":"NTGjYKAZIG5BMLA5JgmTq"},{"card":null,"data":{},"owner":1,"id":"bK6H922wuWVgFniWBWMYl"},{"card":null,"data":{},"owner":1,"id":"rjr_0QnprgBWDcNwSa5td"},{"card":null,"data":{},"owner":1,"id":"ZjZOQYZi-2QmqzZ2iEzsS"},{"card":null,"data":{},"owner":1,"id":"6HEoC8NPACwUFoQDA0cbv"},{"card":null,"data":{},"owner":1,"id":"af5BNfDv3xMxH6LMuu3eY"},{"card":null,"data":{},"owner":1,"id":"n9jPRSX74q3ZkAx1E7KrO"},{"card":null,"data":{},"owner":1,"id":"7Ie1YMhnuTgmOklXM3OYk"},{"card":null,"data":{},"owner":1,"id":"9iyuMSzwB1ttE3lrlGooV"},{"card":null,"data":{},"owner":1,"id":"0CMMyrShn-IWJzyioRiOb"},{"card":null,"data":{},"owner":1,"id":"76xSsLJltkJzHUhEMDGyO"},{"card":null,"data":{},"owner":1,"id":"DLw7-tCYe2o2-d3UGZyyJ"},{"card":null,"data":{},"owner":1,"id":"RflT5ehYrsGAMgh57A4dj"}],"playerActiveMagi":[{"id":"L9Sx1YNJGcEoWrmr_WM3p","owner":2,"card":"Yaki","data":{"energy":3,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentActiveMagi":[{"card":"Stradus","data":{"energy":1,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":8,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false},"owner":1,"id":"17QNeJEWKJIwM0-nogkCc"}],"playerMagiPile":[],"opponentMagiPile":[{"card":null,"data":{},"owner":1,"id":"r5PThBnYlpRHVv3lzIwVz"},{"card":null,"data":{},"owner":1,"id":"MjLGNzFIWqF3BmiDo0Mnj"}],"inPlay":[{"id":"8zi0QGF-80I27WSPSIjkF","owner":1,"card":"Water of Life","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"_eTMtDuQa43rg5vTP21d1","owner":1,"card":"Lovian","data":{"energy":1,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"psLjJ3sRah6tmqpH0Urg7","owner":2,"card":"Plith","data":{"energy":3,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"V39XDlqV0HYpd5nKJn0Zl","owner":2,"card":"Bhatar","data":{"energy":5,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"tQYNbL4hUAxIB5iitg1C5","owner":1,"card":"Xyx","data":{"energy":3,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"BUiyF9cyGZ5h8CPT7dDf7","owner":1,"card":"Xyx","data":{"energy":3,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"NZhsrwdxExfqvbpqnxaS8","owner":2,"card":"Robe of Vines","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"playerDefeatedMagi":[{"id":"0Gixma7KX6lcnJIc-xlun","owner":2,"card":"Poad","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"MCxX96l1Ul-nmamNJHUJI","owner":2,"card":"Tryn","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentDefeatedMagi":[],"playerDiscard":[{"id":"KPU6biDYotvZRP5McgPM8","owner":2,"card":"Leaf Hyren","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"ekn2BUjch9j-KF93VtLfJ","owner":2,"card":"Balamant Pup","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"1-1myXkmsFrEFUcYnxtif","owner":2,"card":"Balamant Pup","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"7tnUC78z6SoPdkKh6OtNq","owner":2,"card":"Timber Hyren","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"CC3fQrhif5y9-IEpDfpIf","owner":2,"card":"Timber Hyren","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"9OT7AxDov7yfQW-zka65_","owner":2,"card":"Twee","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"SWudbMkLYtCkwmCKr7nW9","owner":2,"card":"Rudwot","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"cOxhn53XJniuYUIY74dFj","owner":2,"card":"Balamant Pup","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"IQUryUYTrV7n4lKxlmQpM","owner":2,"card":"Plith","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"28gUL_pX5BPrgiSy4-FKO","owner":2,"card":"Giant Carillion","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"p6AORbAWMvAOvwZmS7c2O","owner":2,"card":"Vortex of Knowledge","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"JGc2m9UP_d0APz5j7vM_D","owner":2,"card":"Grow","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"b7TSxWwJFpnphpas2xX2D","owner":2,"card":"Vortex of Knowledge","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"HUw8txJi7HnksTvPsKJ7I","owner":2,"card":"Weebo","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"ujH02IHAd__8I1E5Ly9-W","owner":2,"card":"Furok","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"Lq-ri0WinqYw6vKQEXrde","owner":2,"card":"Carillion","data":{"energy":0,"controller":2,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}],"opponentDiscard":[{"id":"JCRwaNoZvVEYp8b259SeU","owner":1,"card":"Xyx","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"jiv5T8dk_H8fP8_33THdz","owner":1,"card":"Xyx Elder","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"gPHu8_4q7g5JROElubOQw","owner":1,"card":"Ayebaw","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"XWdQcIPqPZWK6CDWFlNrP","owner":1,"card":"Cloud Narth","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"cEm_Vl37lPAzFOhYTJnBI","owner":1,"card":"Shockwave","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"HLus4WYoaSVQaHT1cggUy","owner":1,"card":"Dream Balm","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"cz9PlvY3x9iClGODkwrrC","owner":1,"card":"Lovian","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"mPrZndfmr7MMWb_pQ6hRA","owner":1,"card":"Lovian","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"oUWVGteV-AUXncl3GczKN","owner":1,"card":"Pharan","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"dFvmk8YNHquOAJrWAJAFk","owner":1,"card":"Cloud Narth","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}},{"id":"duFDYO_hPNAJkMyA5KgOB","owner":1,"card":"Shockwave","data":{"energy":0,"controller":1,"attacked":0,"actionsUsed":[],"energyLostThisTurn":0,"defeatedCreature":false,"hasAttacked":false,"wasAttacked":false}}]},"continuousEffects":[],"step":2,"turn":1,"goesFirst":1,"activePlayer":2,"prompt":false,"promptType":null,"promptMessage":null,"promptPlayer":null,"promptGeneratedBy":null,"promptParams":{},"opponentId":1,"log":[{"type":"log_entry/magi_energy_gain","card":"Stradus","amount":12},{"type":"log_entry/choose_starting_cards","player":1},{"type":"log_entry/draw","player":1},{"type":"log_entry/draw","player":1},{"type":"log_entry/draw","player":1},{"type":"log_entry/draw","player":1},{"type":"log_entry/draw","player":1},{"type":"log_entry/play","card":"Storm Cloud","player":1},{"type":"log_entry/play","card":"Pharan","player":1},{"type":"log_entry/creature_energy_gain","card":"Pharan","amount":3},{"type":"log_entry/play","card":"Cloud Narth","player":1},{"type":"log_entry/creature_energy_gain","card":"Cloud Narth","amount":2},{"type":"log_entry/play","card":"Xyx","player":1},{"type":"log_entry/creature_energy_gain","card":"Xyx","amount":3},{"type":"log_entry/draw","player":1},{"type":"log_entry/draw","player":1},{"type":"log_entry/magi_energy_gain","card":"Poad","amount":13}],"gameEnded":false,"winner":null,"cardsAttached":{}}

        const state = new GameState(stateObj as unknown as SerializedClientState);

        const strategy = new SimulationStrategy()
        strategy.setup(state, 2);

        console.dir(strategy.requestAction())
    })
})